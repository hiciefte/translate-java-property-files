# Repository Structure

This document outlines the structure and purpose of the files and directories within this project.

## Root Directory

- **`.git/`**: Contains Git version control information.
- **`.github/`**: Contains GitHub-specific files like CI workflows.
  - **`workflows/`**: Contains GitHub Actions workflow files.
    - **`build-verify.yml`**: Defines the CI workflow that lints, scans, and tests the project on pull requests.
- **`.gitignore`**: (User-managed) Specifies intentionally untracked files for Git to ignore.
- **`.hadolint.yaml`**: (CI-managed) Configuration file for the `hadolint` Dockerfile linter.
- **`.trivyignore`**: (CI-managed) Configuration file for the `Trivy` vulnerability scanner to ignore specific CVEs.
- **`config.yaml`**: (User-managed) Configuration file for **manual/local runs only**.
- **`docker/`**: Contains all files for building and running the Dockerized application.
  - **`.env.example`**: Example environment file. Must be copied to `docker/.env` by the user and customized with secrets.
  - **`config.docker.yaml`**: Configuration file used *inside* the Docker container.
  - **`docker-compose.yml`**: Configures the Docker service, environment variables, and volume mounts.
  - **`docker-entrypoint.sh`**: Script that runs on container start to initialize the environment and start cron.
  - **`Dockerfile`**: Defines the Docker image, installs dependencies, and sets up the container environment.
  - **`translator-cron`**: Crontab file (no extension) that defines the scheduled execution of the translation script.
- **`docs/`**: Contains project documentation.
  - **`repository-structure.md`**: This file.
- **`glossary.json`**: (User-managed) Contains a glossary of terms for consistent translations.
- **`LICENSE`**: The project's license file.
- **`logs/`**: (Auto-generated, gitignored) Stores runtime logs from the application.
- **`README.md`**: The primary project overview and setup guide.
- **`requirements-dev.in`**: (User-managed) Defines high-level **development and testing** dependencies.
- **`requirements-dev.txt`**: (Auto-generated) Lockfile for development dependencies. **Do not edit this file directly.**
- **`requirements.in`**: (User-managed) Defines high-level **production** dependencies.
- **`requirements.txt`**: (Auto-generated) Lockfile for production dependencies. **Do not edit this file directly.**
- **`SECURITY_STRATEGY.md`**: Outlines the security strategy for the project.
- **`secrets/`**: (User-managed, gitignored) Stores sensitive files like GPG keys.
- **`src/`**: Contains the main Python source code for the translation utilities.
- **`tests/`**: Contains test files for the project.
- **`update-translations.sh`**: Main orchestration shell script, run by cron inside the Docker container.
- **`venv/`**: (Optional, gitignored) Contains Python virtual environment files for local development.

## Key Files Overview

- **`docker/Dockerfile`**: Defines the Docker image. It sets up an Ubuntu environment, installs all necessary system and Python packages, creates a non-root `appuser`, and imports a dedicated bot GPG key.

- **`docker/docker-compose.yml`**: Configures and runs the `translator` Docker service, managing environment variables, build arguments, and volume mounts.

- **`docker/docker-entrypoint.sh`**: Script that runs on container start. It handles cloning/updating the target repository, setting up the `appuser` environment (GPG, Git), and starting the `cron` daemon.

- **`src/translate_localization_files.py`**: The core Python script that loads configuration, parses `.properties` files, interacts with the OpenAI API for translations, and writes the results.

- **`update-translations.sh`**: The main orchestration script. It sets up a Python virtual environment, installs dependencies from the `requirements.txt` lockfile, pulls from Transifex, runs the translation script, and manages the Git workflow (branching, committing, creating a PR, and pushing to Transifex).

- **`requirements.in` / `requirements-dev.in`**: These files define the high-level dependencies for production and development, respectively. They are the **source of truth** for package management.

- **`requirements.txt` / `requirements-dev.txt`**: These are lockfiles generated by `pip-tools` from the `.in` files. They contain the exact, pinned versions of all direct and transitive dependencies, ensuring reproducible builds. **Do not edit these files manually.**

- **`README.md`**: Provides the most current and comprehensive overview of the project, including setup, configuration, and usage. It is the primary source of truth for running the service.
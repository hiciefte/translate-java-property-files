# Repository Structure

This document outlines the structure and purpose of the files and directories within this project.

## Root Directory

- **`.git/`**: Contains Git version control information.
- **`.github/`**: Contains GitHub-specific files like CI workflows.
  - **`workflows/`**: Contains GitHub Actions workflow files.
    - **`build-verify.yml`**: Defines the CI workflow that lints, scans, and tests the project on pull requests.
- **`.gitignore`**: (User-managed) Specifies intentionally untracked files for Git to ignore.
- **`.hadolint.yaml`**: (CI-managed) Configuration file for the `hadolint` Dockerfile linter.
- **`.trivyignore`**: (CI-managed) Configuration file for the `Trivy` vulnerability scanner to ignore specific CVEs.
- **`config.yaml`**: (User-managed) Configuration file for local, non-Docker runs.
- **`docker/`**: Contains all files for building and running the Dockerized application.
  - **`.env.example`**: Example environment file. Must be copied to `docker/.env` by the user and customized with secrets.
  - **`config.docker.yaml`**: Configuration file used *inside* the Docker container for server deployments.
  - **`docker-compose.override.yml`**: (User-managed, gitignored) Optional file for local development to enable features like SSH Agent Forwarding.
  - **`docker-compose.yml`**: Configures the main Docker service, environment variables, and volume mounts.
  - **`docker-entrypoint.sh`**: Script that runs on container start to initialize the environment.
  - **`Dockerfile`**: Defines the Docker image, installs dependencies, and sets up the container environment.
  - **`translator-cron`**: Crontab file that defines the scheduled execution for server deployments.
- **`docs/`**: Contains project documentation.
  - **`new-project-deployment.md`**: The primary guide for setting up the service on a new server.
  - **`repository-structure.md`**: This file.
- **`glossary.json`**: **DEPRECATED**. Glossary terms are now managed in `config.example.yaml`.
- **`LICENSE`**: The project's license file.
- **`logs/`**: (Auto-generated, gitignored) Stores runtime logs from the application.
- **`README.md`**: Provides the primary overview and getting started guide for the project.
- **`requirements-dev.in`**: (User-managed) Defines high-level **development and testing** dependencies.
- **`requirements-dev.txt`**: (Auto-generated) Lockfile for development dependencies. **Do not edit this file directly.**
- **`requirements.in`**: (User-managed) Defines high-level **production** dependencies.
- **`requirements.txt`**: (Auto-generated) Lockfile for production dependencies. **Do not edit this file directly.**
- **`SECURITY_STRATEGY.md`**: Outlines the security strategy for the project.
- **`secrets/`**: (User-managed, gitignored) Stores sensitive files like GPG keys.
- **`src/`**: Contains the main Python source code for the translation utilities.
- **`tests/`**: Contains test files for the project.
- **`update-translations.sh`**: The main orchestration script, run by the container. It pulls from Transifex, runs the Python script, and manages the Git workflow (branching, committing, creating a PR).
- **`venv/`**: (Optional, gitignored) Contains Python virtual environment files for local development.

## Key Files Overview

- **`docker/Dockerfile`**: Defines the Docker image. It sets up an Ubuntu environment, installs all necessary system and Python packages, creates a non-root `appuser`, and imports a dedicated bot GPG key.

- **`docker/docker-compose.yml`**: Configures and runs the `translator` Docker service, managing environment variables, build arguments, and volume mounts.

- **`docker/docker-entrypoint.sh`**: Script that runs on container start. It handles cloning/updating the target repository, setting up the `appuser` environment (GPG, Git), and starting the `cron` daemon.

- **`src/translate_localization_files.py`**: The core Python script. It loads configuration, parses `.properties` files, and manages the two-step translation and review process with the OpenAI API.

- **`update-translations.sh`**: The main orchestration script, run by the container. It pulls from Transifex, runs the Python script, and manages the Git workflow (branching, committing, creating a PR).

- **`requirements.in` / `requirements.txt`**: Define and lock the production dependencies for the Docker image.

- **`README.md`**: Provides the primary overview and getting started guide for the project.